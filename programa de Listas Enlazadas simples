#include <iostream>
#include <cctype>
#include <thread>
#include <chrono>

// Nodo para la lista enlazada simple
struct Nodo {
    int valor;
    Nodo* siguiente;
};

//--------------------------------
// Prototipos de funci√≥n
void agregarNodo(Nodo*& cabeza, Nodo*& nuevoNodo, Nodo*& auxiliar);
void mostrarLista(Nodo*& cabeza);
void eliminarValor(Nodo*& cabeza);

int main () {
    Nodo* cabeza = nullptr;
    Nodo* nuevoNodo;
    Nodo* auxiliar;
    int opcion;

    std::cout << "====================================================\n";
    std::cout << "   üü¢ Bienvenido al programa de Listas Enlazadas üü¢\n";
    std::cout << "====================================================\n\n";
    
    do {
        std::cout << "\nüìå ¬øQu√© desea hacer con la lista?\n";
        std::cout << "-----------------------------------\n";
        std::cout << "  (1) ‚ûï Agregar nodo\n";
        std::cout << "  (2) üìã Mostrar lista\n";
        std::cout << "  (3) ‚ùå Eliminar valor\n";
        std::cout << "  (4) üö™ Salir\n";
        std::cout << "-----------------------------------\n";
        std::cout << "üëâ Ingrese la opci√≥n: ";
        std::cin >> opcion;

        switch (opcion) {
            case 1:
                agregarNodo(cabeza, nuevoNodo, auxiliar);
            break;

            case 2: 
                mostrarLista(cabeza);
            break;

            case 3:
                eliminarValor(cabeza);
            break;

            case 4: 
                std::cout << "\n‚è≥ Saliendo del programa...\n";
                std::this_thread::sleep_for(std::chrono::seconds(2));
                std::cout << "‚úÖ Gracias por usar el programa. ¬°Hasta pronto!\n\n";
            break;

            default:
                std::cout << "‚ö†Ô∏è  Opci√≥n inv√°lida. Intente nuevamente.\n";
            break;
        }
    } while (opcion != 4);

    return 0;
}

//--------------------------------
// Funci√≥n para a√±adir nodos al final de la lista.
void agregarNodo(Nodo*& cabeza, Nodo*& nuevoNodo, Nodo*& auxiliar) {
    char respuesta;
    
    std::cout << "\n‚ûï ¬øDesea a√±adir un nuevo nodo a la lista? (S/N): ";
    std::cin >> respuesta;

    while (std::toupper(respuesta) == 'S') {
        nuevoNodo = new Nodo();

        std::cout << "üëâ Ingrese el valor del nodo: ";
        std::cin >> nuevoNodo->valor;
        nuevoNodo->siguiente = nullptr;

        if (cabeza == nullptr) { 
            cabeza = nuevoNodo;
            auxiliar = nuevoNodo;
        } else {
            auxiliar->siguiente = nuevoNodo;
            auxiliar = nuevoNodo;
        }

        std::cout << "‚úÖ Nodo a√±adido con √©xito.\n\n";
        std::cout << "‚ûï ¬øDesea a√±adir otro nodo? (S/N): ";
        std::cin >> respuesta;
    }
}

// Funci√≥n para mostrar la lista.
void mostrarLista(Nodo*& cabeza) {
    Nodo* actual = cabeza;

    std::cout << "\nüìã Contenido de la lista:\n";
    std::cout << "-----------------------------\n";

    if (actual == nullptr) {
        std::cout << "‚ö†Ô∏è  La lista est√° vac√≠a.\n";
        return;
    }

    while (actual != nullptr) {
        std::cout << " [" << actual->valor << "] -> ";
        actual = actual->siguiente;
    }
    std::cout << " nullptr\n";
}

// Funci√≥n para eliminar un valor de la lista.
void eliminarValor(Nodo*& cabeza) {
    Nodo* actual = cabeza;
    Nodo* anterior = nullptr;
    int valor;

    if (actual == nullptr) {
        std::cout << "\n‚ö†Ô∏è  No se puede eliminar: la lista est√° vac√≠a.\n";
        return;
    } else {
        std::cout << "\n‚ùå Ingrese el valor a eliminar: ";
        std::cin >> valor;

        while (actual != nullptr && actual->valor != valor) {
            anterior = actual;
            actual = actual->siguiente;
        }

        if (actual == nullptr) {
            std::cout << "‚ö†Ô∏è  El valor no se encuentra en la lista.\n";
            return;
        } else if (anterior != nullptr) {
            anterior->siguiente = actual->siguiente;
        } else {
            cabeza = actual->siguiente;
        }

        delete actual;
        std::cout << "‚úÖ El valor ha sido eliminado de la lista.\n";
    }
}

